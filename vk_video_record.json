{
	"$schema": "https://raw.githubusercontent.com/LunarG/VulkanTools/main/vkconfig_core/layers/layers_schema.json",
	"file_format_version": "1.2.0",
	"layer": {
		"name": "VK_LAYER_THEHAMSTA_video_record",
		"type": "GLOBAL",
		"library_path": "./libvk_video_record_layer.so",
		"api_version": "1.3.274",
		"introduction": "",
		"url": "",
		"platforms": [
			"LINUX"
		],
		"status": "ALPHA",
		"implementation_version": "2",
		"description": "",
		"functions": {
			"vkNegotiateLoaderLayerInterfaceVersion": "record_vk_negotiate_loader_layer_interface_version"
		},
		"device_extensions": [
			{
				"name": "VK_KHR_swapchain",
				"spec_version": "70",
				"entrypoints": [
					"vkQueuePresentKHR"
				]
			}
		],
		"enable_environment": {
			"ENABLE_VK_VIDEO_RECORD_LAYER": "1"
		},
		"disable_environment": {
			"DISABLE_VK_VIDEO_RECORD_LAYER": "1"
		},
		"features": {
			"settings": [
				{
					"key": "video_output_folder",
					"env": "VK_VIDEO_RECORD_OUTPUT_FOLDER",
					"label": "Output folder for video files",
					"description": "Specifies the file to record screen content to",
					"type": "SAVE_FOLDER",
					"default": ""
				},
				{
					"key": "codec",
					"env": "VK_VIDEO_RECORD_CODEC",
					"label": "Output Codec",
					"description": "",
					"type": "ENUM",
					"flags": [
						{
							"key": "H264",
							"label": "H264",
							"description": "H264"
						},
						{
							"key": "H265",
							"label": "H265",
							"description": "H265"
						},
						{
							"key": "AV1",
							"label": "AV1",
							"description": "AV1"
						}
					],
					"default": "H264"
				},
				{
					"key": "rate_control_mode",
					"label": "Rate control mode",
					"description": "",
					"type": "ENUM",
					"flags": [
						{
							"key": "CBR",
							"label": "CBR",
							"description": "Constant bitrate"
						}
					],
					"default": "CBR",
					"settings": [
						{
							"key": "quality_level",
							"label": "Quality level",
							"description": "",
							"type": "INT",
							"default": 1,
							"range": {
								"min": 0,
								"max": 7
							},
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						},
						{
							"key": "vbv_size_in_ms",
							"label": "Virtual buffer size in ms",
							"description": "",
							"type": "INT",
							"default": 1000,
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						},
						{
							"key": "initial_vbv_size_in_ms",
							"label": "Initial virtual buffer size in ms",
							"description": "",
							"type": "INT",
							"default": 0,
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						},
						{
							"key": "average_bitrate",
							"label": "Average bitrate",
							"description": "",
							"type": "INT",
							"default": 8388608,
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						},
						{
							"key": "max_bitrate",
							"label": "Maximum bitrate",
							"description": "",
							"type": "INT",
							"default": 10485760,
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						},
						{
							"key": "framerate_numerator",
							"label": "Frame rate numerator",
							"description": "",
							"type": "INT",
							"default": 60,
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						},
						{
							"key": "framerate_denominator",
							"label": "Frame rate denominator",
							"description": "",
							"type": "INT",
							"default": 1,
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "rate_control_mode",
										"value": "CBR"
									}
								]
							}
						}
					]
				},
				{
					"key": "use_nvpro",
					"env": "VK_VIDEO_RECORD_CODEC",
					"label": "Use NVPRO GOP structure",
					"description": "",
					"type": "BOOL",
					"default": true,
					"settings": [
						{
							"key": "gop_size",
							"label": "GOP frame count",
							"description": "",
							"type": "INT",
							"default": 16,
							"range": {
								"min": 1,
								"max": 127
							},
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "use_nvpro",
										"value": true
									}
								]
							}
						},
						{
							"key": "idr_period",
							"label": "IDR period",
							"description": "",
							"type": "INT",
							"default": 16,
							"range": {
								"min": 1,
								"max": 127
							},
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "use_nvpro",
										"value": true
									}
								]
							}
						},
						{
							"key": "max_consecutive_b_frames",
							"label": "Max consecutive B frames",
							"description": "",
							"type": "INT",
							"default": 2,
							"range": {
								"min": 0,
								"max": 127
							},
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "use_nvpro",
										"value": true
									}
								]
							}
						},
						{
							"key": "temporal_layer_count",
							"label": "Temporal layer count",
							"description": "",
							"type": "INT",
							"default": 1,
							"range": {
								"min": 1,
								"max": 1
							},
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "use_nvpro",
										"value": true
									}
								]
							}
						}
						,
						{
							"key": "last_frame_type",
							"label": "Last frame type",
							"description": "",
							"type": "ENUM",
							"flags": [
								{
									"key": "I",
									"label": "I",
									"description": "I"
								},
								{
									"key": "IDR",
									"label": "IDR",
									"description": "IDR"
								},
								{
									"key": "P",
									"label": "P",
									"description": "P"
								},
								{
									"key": "B",
									"label": "B",
									"description": "B"
								}
							],
							"default": "P",
							"dependence": {
								"mode": "ALL",
								"settings": [
									{
										"key": "use_nvpro",
										"value": true
									}
								]
							}
						}
					]
				}
			]
		}
	}
}
